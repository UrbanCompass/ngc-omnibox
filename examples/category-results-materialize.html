<!DOCTYPE html>
<html ng-app="demoApp">
  <head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <style>
      ngc-omnibox-suggestions {
        display: block;
      }

      /* Small work around Materialize so input field takes up the remainder of the space from chips */
      .chips {
        display: flex;
        align-items: center;
      }
      .chips .input {
        width: 100% !important;
      }
      ngc-omnibox-field {
        flex-grow: 1;
      }
    </style>
  </head>
  <body>
    <main class="container" ng-controller="OmniboxExampleController as demo">
      <h1>Categorized Results Omnibox Example</h1>
      <h2>Search For a Car Make by Country</h2>
      <p>Model value: {{demo.model}}</p>

      <ngc-omnibox
          ng-model="demo.model"
          placeholder="Enter a car make (e.g. Ford)"
          autofocus="true"
          is-selectable="demo.isSelectable(suggestion)"
          can-show="demo.shouldShowSuggestions(query)"
          multiple="true"
          source="demo.sourceFn(query)">

        <div class="chips" ng-class="{'focus': omnibox.fieldHasFocus}">
          <ngc-omnibox-choices>
            <div class="chip" tabindex="1" ng-focus="hasFocus = true" ng-blur="hasFocus = false" ng-class="{'selected': hasFocus}">
              {{selection.make_display}}
              <i class="close material-icons" ng-click="omnibox.unchoose(selection)">
                close
              </i>
            </div>
          </ngc-omnibox-choices>

          <ngc-omnibox-field class="input" type="text" tabindex="0" ng-focus="omnibox.fieldHasFocus = true" ng-blur="omnibox.fieldHasFocus = false"></ngc-omnibox-field>
        </div>

        <ngc-omnibox-suggestions class="collection with-header">

          <dl ngc-omnibox-suggestion-category>
            <dt class="collection-header">
              <h5 ngc-omnibox-suggestion-header class="collection-item"
                  ng-class="{'active': omnibox.isHighlighted(suggestion)}">
                {{suggestion.make_country}}
              </h5>
            </dt>
            <dd>
              <div ngc-omnibox-suggestion-item class="collection-item"
                  ng-class="{'active': omnibox.isHighlighted(suggestion)}">
                {{suggestion.make_display}}
              </div>
            </dd>
          </dl>

          <div ngc-omnibox-suggestion-loading class="progress">
            <div class="indeterminate"></div>
          </div>

          <div ngc-omnibox-suggestion-empty class="center-align">
            <span class="blue-grey-text text-lighten-3">No results...</span>
          </div>

        </ngc-omnibox-suggestions>
      </ngc-omnibox>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/2.5.0/fuse.min.js"></script>
    <script src="../dist/ngc-omnibox.js"></script>
    <script src="./category-results.js"></script>
  </body>
</html>
